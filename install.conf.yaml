- defaults:
    link:
      create: true
      relink: true

- clean: ['~']

- link:
    ~/.config/Code/User/settings.json: vscode/settings.json
    ~/.config/nvim/init.vim: vim/.vimrc
    ~/.direnvrc: direnv/.direnvrc
    ~/.gdb-cyrus-dashboard: third-party/cyrus-gdb-dashboard/.gdbinit
    ~/.gdbinit: gdb/.gdbinit
    ~/.gitconfig: git/.gitconfig
    ~/.purepower: third-party/romkatv-dotfiles-public/.purepower
    ~/.tmux.conf: tmux/.tmux.conf
    ~/.tromey-gdb-helpers: third-party/tromey-gdb-helpers
    ~/.urlview: urlview/.urlview
    ~/.vimrc: vim/.vimrc
    ~/.zfunc/_rg: third-party/BurntSushi-ripgrep/complete/_rg
    ~/.zshrc: zsh/.zshrc

- shell:
    # only supports os's that use apt, todo #8 !
    - which sudo || apt install sudo -y
    - which zsh || sudo apt install -y zsh
    # - stat ~/.oh-my-zsh ] || (cd ~ && sh -c "$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)")
    - which curl || sudo apt install -y curl
    - which nvim || sudo apt install -y neovim
    - which urlview || sudo apt install -y urlview
    - ls ~/.tmux/plugins/tpm || git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm

    # VSCode extension sync
    # currently this list is manually updated by running:
    # code --list-extensions > <this repo>/vscode/extensions.list
    - if type code; then cat vscode/extensions.list | xargs -L 1 code --install-extension; fi

    # TODO below command doesn't work as-is
    # - which cargo || bash <(curl https://sh.rustup.rs -sSf) -y

    # TODO disable rust utils install... takes forever!
    # - which alacritty || (sudo apt install -y cmake libfreetype6-dev libfontconfig1-dev xclip && cargo install --git https://github.com/jwilm/alacritty)
    # - which rg || cargo install --git https://github.com/BurntSushi/ripgrep
    # - which fd || cargo install --git https://github.com/sharkdp/fd
    # - which bat || cargo install --git https://github.com/sharkdp/bat
